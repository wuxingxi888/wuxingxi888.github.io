---
title: 禁止打开开发者工具
date: 2023-01-11 11:55:15
tags: web html 实用技巧
categories: 实用技巧
top_img:
cover: https://wuxingxi-blog.oss-cn-beijing.aliyuncs.com/images/082edc1697adcc7ccf12261a842b3319.jpeg
---

## 禁用开发者工具的尝试与思考

​	在如今web盛行的时代，确保网页安全是一个至关重要的主题，涉及到用户隐私、数据保护、防范攻击等方面,  我们时常会遇到需要保护代码免受未经授权访问和复制的情况。一些开发者可能尝试通过禁用浏览器开发者工具来实现这一目标。在这篇文章中，我们将介绍一种使用 `disable-devtool` 库的尝试，并讨论相关的思考。

### 为什么要禁用开发者工具？

1. **代码安全性：** 一些开发者希望通过禁用开发者工具来增强其代码的安全性，防止被未授权的用户查看、修改或复制。
2. **防止调试：** 有时，开发者可能希望防止用户对其网站进行调试，以保护敏感信息或增加一些控制。

## **功能介绍**

npm库名称：`disable-devtool`，

github地址：`github.com/theajack/disable-devtool`。从f12按钮，右键单击和浏览器菜单都可以禁用Web开发工具。

> 一行代码搞定禁用web开发者工具

该库有以下特性:

- 支持可配置是否禁用右键菜单
- 禁用 f12 和 ctrl+shift+i 等快捷键
- 支持识别从浏览器菜单栏打开开发者工具并关闭当前页面
- 开发者可以绕过禁用 (url参数使用tk配合md5加密)
- 多种监测模式，支持几乎所有浏览器（IE,360,qq浏览器,FireFox,Chrome,Edge...）
- 高度可配置、使用极简、体积小巧
- 支持npm引用和script标签引用(属性配置)
- 识别真移动端与浏览器开发者工具设置插件伪造的移动端，为移动端节省性能
- 支持识别开发者工具关闭事件
- 支持可配置是否禁用选择、复制、剪切、粘贴功能
- 支持识别 eruda 和 vconsole 调试工具
- 支持挂起和恢复探测器工作
- 支持配置ignore属性，用以自定义控制是否启用探测器
- 支持配置iframe中所有父页面的开发者工具禁用

## **使用方法**

使用该库非常简单，只需按照以下步骤进行操作：

### **1.1 npm 引用**

推荐使用这种方式安装使用，使用script脚本可以被代理单独拦截掉从而无法执行。

```text
npm i disable-devtool

import DisableDevtool from 'disable-devtool';

DisableDevtool(options);
```

### **1.2 script方式使用**

```text
<script disable-devtool-auto src='https://cdn.jsdelivr.net/npm/disable-devtool'></script>
```

或者通过版本引用:

```text
<!--使用指定版本-->
<script disable-devtool-auto src='https://cdn.jsdelivr.net/npm/disable-devtool@x.x.x'></script>
<!--使用最新版本-->
<script disable-devtool-auto src='https://cdn.jsdelivr.net/npm/disable-devtool@latest'></script>
```

### **1.3 npm 方式 options参数说明**

options中的参数与说明如下，各方面的配置相当完善。

```text
interface IConfig {
    md5?: string; // 绕过禁用的md5值，默认不启用绕过禁用
    url?: string; // 关闭页面失败时的跳转页面，默认值为localhost
    tkName?: string; // 绕过禁用时的url参数名称，默认为 ddtk
    ondevtoolopen?(type: DetectorType, next: Function): void; // 开发者面板打开的回调，启用时url参数无效，type 为监测模式， next函数是关闭当前窗口
    ondevtoolclose?(): void; // 开发者面板关闭的回调
    interval?: number; // 定时器的时间间隔 默认200ms
    disableMenu?: boolean; // 是否禁用右键菜单 默认为true
    stopIntervalTime?: number; // 在移动端时取消监视的等待时长
    clearIntervalWhenDevOpenTrigger?: boolean; // 是否在触发之后停止监控 默认为false， 在使用ondevtoolclose时该参数无效
    detectors?: Array<DetectorType>; // 启用的检测器 检测器详情
    clearLog?: boolean; // 是否每次都清除log
    disableSelect?: boolean; // 是否禁用选择文本 默认为false
    disableCopy?: boolean; // 是否禁用复制 默认为false
    disableCut?: boolean; // 是否禁用剪切 默认为false
    disablePaste: boolean; // 是否禁用粘贴 默认为false
    ignore?: (string|RegExp)[] | null | (()=>boolean); // 某些情况忽略禁用
    disableIframeParents?: boolean; // iframe中是否禁用所有父窗口
    timeOutUrl?: // 关闭页面超时跳转的url;
}

enum DetectorType {
  Unknown = -1,
  RegToString = 0, // 根据正则检测
  DefineId, // 根据dom id检测
  Size, // 根据窗口尺寸检测
  DateToString, // 根据Date.toString 检测
  FuncToString, // 根据Function.toString 检测
  Debugger, // 根据断点检测，仅在ios chrome 真机情况下有效
  Performance, // 根据log大数据性能检测
  DebugLib, // 检测第三方调试工具 eruda 和 vconsole   
};
```

### **1.4 script 方式使用属性配置**

```text
<script 
    disable-devtool-auto
    src='https://cdn.jsdelivr.net/npm/disable-devtool'
    md5='xxx'
    url='xxx'
    tk-name='xxx'
    interval='xxx'
    disable-menu='xxx'
    detectors='xxx'
    clear-log='true'
    disable-select='true'
    disable-copy='true'
    disable-cut='true'
    disable-paste='true'
></script>
```

### **1.5 事件监听**

ondevtoolopen 事件的回调参数就是被触发的监测模式。可以在 ondevtoolopen 里执行业务逻辑，比如做数据上报、用户行为分析等。

```text
DisableDevtool({
    ondevtoolopen(type, next){
        alert('Devtool opened with type:' + type);
        next();
    }
});
```

### **1.6 md5 与 tk 绕过禁用**

该库中使用 key 与 md5 配合的方式使得开发者可以在线上绕过禁用。

流程如下：

先指定一个 key a（该值不要记录在代码中），使用 md5 加密得到一个值 b，将b作为 md5 参数传入，开发者在访问 url 的时候只需要带上url参数 ddtk=a，便可以绕过禁用。

disableDevtool对象暴露了 md5 方法，可供开发者加密时使用：

```text
DisableDevtool.md5('xxx');
```

更多细节可查阅官方文档，中文文档地址：`https://github.com/theajack/disable-devtool/blob/master/README.cn.md`

## **最后**

尽管该库可以有效地禁用浏览器的开发者工具面板，但仍然需要注意以下几点：

- 该库只能禁用开发者工具的面板，无法阻止用户通过其他途径访问网页源码。因此，建议结合其他安全措施来保护网站。
- 禁用开发者工具可能会对网站的调试和维护造成一定的困扰。需要调试线上代码的时候可以使用上述1.6绕过禁用进行调试。
- 该库仅适用于现代浏览器，对于一些较旧的浏览器可能存在兼容性问题。在使用前请确保测试过兼容性。

为了进一步加强网页源码的安全性，我们可以采取以下额外措施：

- **加密敏感代码**，使用加密算法对关键代码进行加密，以防止非授权访问和修改。
- **使用服务器端渲染**，将网页的渲染过程放在服务器端，只返回最终渲染结果给客户端，隐藏源代码和逻辑。
- **定期更新代码**，定期更新代码库以充分利用新的安全特性和修复已知漏洞。

保护网页源码的安全性对于Web开发至关重要。通过使用npm库`disable-devtool`，并结合其他安全措施，我们可以有效地降低用户访问和修改源代码的风险。但是绝对的安全是不存在的，因此定期更新和加强安全性措施也是必要的。
